services:
    paromailer.template.factory:
        class: Paro\MailerBundle\Model\Template\TemplateFactory

    paromailer.template.engine.twig:
        class: Paro\MailerBundle\Model\Template\Twig\TwigTemplateEngine
        arguments:
            - "@twig"
        tags:
            -  { name: paromailer.template.engine, alias: 'twig' }

    paromailer.producer.factory:
        class: Paro\MailerBundle\Model\ProducerFactory

    paromailer.consumer.factory:
            class: Paro\MailerBundle\Model\ConsumerFactory

    paromailer.producer:
        class: Paro\MailerBundle\Model\ProducerInterface
        factory: ["@paromailer.producer.factory", createNewProducer]
        arguments:
            - "%paro_mailer.storage.type%"
            - "%paro_mailer.storage.parameters%"

    paromailer.consumer:
        class: Paro\MailerBundle\Model\ConsumerInterface
        factory: ["@paromailer.consumer.factory", createNewConsumer]
        arguments:
            - "%paro_mailer.storage.type%"
            - "%paro_mailer.storage.parameters%"

    paromailer.mailer:
        class: Paro\MailerBundle\Model\Mailer
        arguments: ['paro_mailer.sender', '@paromailer.producer', '@paromailer.consumer', '@paromailer.template.factory']